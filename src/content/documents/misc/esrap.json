{
  "title": "esrap",
  "metadata": {},
  "atAGlance": "",
  "commonKnowledge": "",
  "secretKnowledge": "",
  "seeAlso": [],
  "rawContent": "# esrap\n\nParse in reverse. AST goes in, code comes out.\n\n## Usage\n\n```js\nimport { print } from 'esrap';\nimport ts from 'esrap/languages/ts';\n\nconst ast = {\n  type: 'Program',\n  body: [\n    {\n      type: 'ExpressionStatement',\n      expression: {\n        callee: {\n          type: 'Identifier',\n          name: 'alert'\n        },\n        arguments: [\n          {\n            type: 'Literal',\n            value: 'hello world!'\n          }\n        ]\n      }\n    }\n  ]\n};\n\nconst { code, map } = print(ast, ts());\n\nconsole.log(code); // alert('hello world!');\n```\n\nIf the nodes of the input AST have `loc` properties (e.g. the AST was generated with [`acorn`](https://github.com/acornjs/acorn/tree/master/acorn/#interface) with the `locations` option set), sourcemap mappings will be created.\n\n## Built-in languages\n\n`esrap` ships with two built-in languages — `ts()` and `tsx()` (considered experimental at present!) — which can print ASTs conforming to [`@typescript-eslint/types`](https://www.npmjs.com/package/@typescript-eslint/types) (which extends [ESTree](https://github.com/estree/estree)):\n\n```js\nimport ts from 'esrap/languages/ts';\nimport tsx from 'esrap/languages/tsx'; // experimental!\n```\n\nBoth languages accept an options object:\n\n```js\nconst { code, map } = print(\n  ast,\n  ts({\n    // how string literals should be quoted — `single` (the default) or `double`\n    quotes: 'single',\n\n    // an array of `{ type: 'Line' | 'Block', value: string, loc: { start, end } }` objects\n    comments: [],\n\n    // a pair of functions for inserting additional comments before or after a given node.\n    // returns `Array<{ type: 'Line' | 'Block', value: string }>` or `undefined`\n    getLeadingComments: (node) => [{ type: 'Line', value: ' a comment before the node' }],\n    getTrailingComments: (node) => [{ type: 'Block', value: ' a comment after the node' }]\n  })\n);\n```\n\nYou can generate the `comments` array by, for example, using [Acorn's](https://github.com/acornjs/acorn/tree/master/acorn/#interface) `onComment` option.\n\n## Custom languages\n\nYou can also create your own languages:\n\n```ts\nimport { print, type Visitors } from 'esrap';\n\nconst language: Visitors<MyNodeType> = {\n  _(node, context, visit) {\n    // the `_` visitor handles any node type\n    context.write('[');\n    visit(node);\n    context.write(']');\n  },\n  List(node, context) {\n    // node.type === 'List'\n    for (const child of node.children) {\n      context.visit(child);\n    }\n  },\n  Foo(node, context) {\n    // node.type === 'Foo'\n    context.write('foo');\n  },\n  Bar(node, context) {\n    // node.type === 'Bar'\n    context.write('bar');\n  }\n};\n\nconst ast: MyNodeType = {\n  type: 'List',\n  children: [{ type: 'Foo' }, { type: 'Bar' }]\n};\n\nconst { code, map } = print(ast, language);\n\ncode; // `[[foo][bar]]`\n```\n\nThe `context` API has several methods:\n\n- `context.write(data: string, node?: BaseNode)` — add a string. If `node` is provided and has a standard `loc` property (with `start` and `end` properties each with a `line` and `column`), a sourcemap mapping will be created\n- `context.indent()` — increase the indentation level, typically before adding a newline\n- `context.newline()` — self-explanatory\n- `context.space()` — adds a space character, if it doesn't immediately follow a newline\n- `context.margin()` — causes the next newline to be repeated (consecutive newlines are otherwise merged into one)\n- `context.dedent()` — decrease the indentation level (again, typically before adding a newline)\n- `context.visit(node: BaseNode)` — calls the visitor corresponding to `node.type`\n- `context.location(line: number, column: number)` — insert a sourcemap mapping _without_ calling `context.write(...)`\n- `context.measure()` — returns the number of characters contained in `context`\n- `context.empty()` — returns true if the context has no content\n- `context.new()` — creates a child context\n- `context.append(child)` — appends a child context\n\nIn addition, `context.multiline` is `true` if the context has multiline content. (This is useful for knowing, for example, when to insert newlines between nodes.)\n\nTo understand how to wield these methods effectively, read the source code for the built-in languages.\n\n## Options\n\nYou can pass the following options:\n\n```js\nconst { code, map } = print(ast, ts(), {\n  // Populate the `sources` field of the resulting sourcemap\n  // (note that the AST is assumed to come from a single file)\n  sourceMapSource: 'input.js',\n\n  // Populate the `sourcesContent` field of the resulting sourcemap\n  sourceMapContent: fs.readFileSync('input.js', 'utf-8'),\n\n  // Whether to encode the `mappings` field of the resulting sourcemap\n  // as a VLQ string, rather than an unencoded array. Defaults to `true`\n  sourceMapEncodeMappings: false,\n\n  // String to use for indentation — defaults to '\\t'\n  indent: '  '\n});\n```\n\n## Why not just use Prettier?\n\nBecause it's ginormous.\n\n## Developing\n\nThis repo uses [pnpm](https://pnpm.io). Once it's installed, do `pnpm install` to install dependencies, and `pnpm test` to run the tests.\n\n## License\n\n[MIT](LICENSE)\n",
  "sourcePath": "dnd-tracker/node_modules/esrap/README.md",
  "slug": "esrap",
  "category": "misc"
}